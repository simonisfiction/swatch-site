<!DOCTYPE html>
<html>
  <head>
    <title>Swatches</title>
    <link rel="stylesheet" href="styles.css">

  </head>
  <body>


    <!----------- nav bar ------------------>
    <nav>
      <div id="logo">
        <!-- <img id="spongebob" src="spongebob.jpg"> -->
      </div>
      <div id="nav-buttons">
        <ul id="nav-list">
          <li class="nav-list-item"><button id="nav-button"><a href="./login.html">Login</a></button></li>
          <li class="nav-list-item"><button id="nav-button">Profile</button></li>
          <li class="nav-list-item"><button id="nav-button">Swatches</button></li>
          <li class="nav-list-item"><button id="nav-button">Browse</button></li>
        </ul>
      </div>
    </nav>

    <!----------------- content --------------->
    <content id="content-area">
      <div id="swatch-area">
        <input id="add-input" class="text-boxes">
        <button id="add-button" class="button-styles">Add Color</button>
        <ul id="swatch-ul">
        </ul>
      </div>

      <div id="generate-swatch-area">
        <textarea rows="15" cols="75" id="target-site-textarea" class="text-boxes">

        </textarea>
        <button id="generate-swatch-button" class="button-styles">Generate Swatch</button>

      </div>
      <div>
        <p>
          rgb( 200 , 40 , 35)
          <br> #4f3
          <br> #5ff4d2
          <br> hsl( 240 , 100% , 75% )
        </p>
      </div>
    </content>
      

    <script>
      //swatch list
      var swatch = [
        
        
      ];


     


      function displaySwatch() {

        let swatchUL = document.getElementById('swatch-ul');
        swatchUL.innerHTML = '';

        for (let i = 0; i < swatch.length; i++) {
          let newLi = document.createElement('li');

          newLi.innerText = swatch[i].color;
          console.log(newLi);

          let colorDiv = document.createElement('div');
          colorDiv.style.backgroundColor = swatch[i].color;
          colorDiv.style.height = '30px';
          colorDiv.style.width = '200px';


          newLi.appendChild(colorDiv);
          swatchUL.appendChild(newLi);
        }
      
      }

      function addColor() {
        
        let newColor = document.getElementById('add-input');
        
        swatch.push({color: newColor.value});
        newColor.value = '';
        newColor.innerText = '';
    
        displaySwatch();
      }

      function generateSwatch() {
        let inputCodeTextArea = document.getElementById('target-site-textarea');
        let rawText = inputCodeTextArea.value;
        console.log(rawText);
        scrapeRGB(rawText);
        displaySwatch();
      }

      function scrapeRGB(rawText) {
        let rgbArr = [];
        let hexArr = [];
        //detects hsl, and rgb colors
        let rgbRegex = /rgb\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\)/ig;
        //detects hex colors
        let hexRegex = /#[a-f0-9]{6}|#[a-f0-9]{3}/ig;
        rgbArr = rawText.match(rgbRegex);
        hexArr = rawText.match(hexRegex);
        
        if(hexArr.length){
          for (let i = 0; i < hexArr.length; i++) {
            swatch.push({color: hexArr[i]});
          }
        }
        if(rgbArr.length){
          for (let i = 0; i < rgbArr.length; i++) {
            swatch.push({color: rgbArr[i]});
          }
        }
    
       
        
        console.log(swatch);
      }

      displaySwatch();

      let inputCodeTextArea = document.getElementById('target-site-textarea');
      
      let generateSwatchButton = document.getElementById('generate-swatch-button');
      generateSwatchButton.addEventListener('click', generateSwatch);

      let addButton = document.getElementById('add-button');
      addButton.addEventListener('click', addColor);
    </script>
  </body>
</html>